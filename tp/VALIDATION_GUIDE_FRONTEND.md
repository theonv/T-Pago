# üìù Guia de Valida√ß√£o de Inputs no Front-end

## üéØ Componentes Criados

### 1. **Validadores** (`src/functions/validation.js`)
- Valida√ß√£o de email
- Valida√ß√£o de senha
- Valida√ß√£o de nome
- Valida√ß√£o de descri√ß√£o de tarefa
- Valida√ß√£o de nome de lista
- Valida√ß√£o de data
- Validadores de formul√°rio completo

### 2. **Componentes de Input** (`src/components/ValidatedInput.jsx`)
- `ValidatedInput` - Input de texto com valida√ß√£o
- `ValidatedTextarea` - Textarea com valida√ß√£o
- `ValidatedSelect` - Select com valida√ß√£o
- `PasswordInput` - Input de senha com mostrar/ocultar

---

## üöÄ Como Usar

### Exemplo 1: Formul√°rio de Login

```jsx
'use client';
import { useState } from 'react';
import { ValidatedInput, PasswordInput } from '@/components/ValidatedInput';
import { validateLoginForm } from '@/functions/validation';

export default function LoginPage() {
  const [formData, setFormData] = useState({
    email: '',
    senha: ''
  });
  
  const [errors, setErrors] = useState({});
  const [touched, setTouched] = useState({});
  const [loading, setLoading] = useState(false);

  const handleChange = (name, value) => {
    setFormData(prev => ({ ...prev, [name]: value }));
    
    // Remove erro quando usu√°rio come√ßa a digitar
    if (errors[name]) {
      setErrors(prev => ({ ...prev, [name]: '' }));
    }
  };

  const handleBlur = (name) => {
    setTouched(prev => ({ ...prev, [name]: true }));
    
    // Valida o formul√°rio inteiro
    const validation = validateLoginForm(formData);
    setErrors(validation.errors);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    
    // Marca todos como tocados
    setTouched({ email: true, senha: true });
    
    // Valida
    const validation = validateLoginForm(formData);
    setErrors(validation.errors);
    
    if (!validation.valid) {
      return; // Para se tiver erros
    }
    
    // Processa o login
    setLoading(true);
    try {
      // Sua l√≥gica de login aqui
      console.log('Login:', formData);
    } catch (error) {
      console.error('Erro:', error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="space-y-6">
      <ValidatedInput
        label="Email"
        name="email"
        type="email"
        value={formData.email}
        onChange={handleChange}
        onBlur={handleBlur}
        error={errors.email}
        touched={touched.email}
        placeholder="seuemail@exemplo.com"
        required
        maxLength={100}
        autoComplete="username"
      />

      <PasswordInput
        label="Senha"
        name="senha"
        value={formData.senha}
        onChange={handleChange}
        onBlur={handleBlur}
        error={errors.senha}
        touched={touched.senha}
        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
        required
        autoComplete="current-password"
      />

      <button
        type="submit"
        disabled={loading}
        className="w-full bg-blue-500 text-white py-3 rounded-xl hover:bg-blue-600 disabled:bg-gray-400"
      >
        {loading ? 'Entrando...' : 'Entrar'}
      </button>
    </form>
  );
}
```

### Exemplo 2: Formul√°rio de Criar Tarefa

```jsx
'use client';
import { useState } from 'react';
import { ValidatedInput, ValidatedTextarea } from '@/components/ValidatedInput';
import { validateTaskForm } from '@/functions/validation';

export default function CreateTaskForm({ onSuccess }) {
  const [formData, setFormData] = useState({
    nome: '',
    descricao: '',
    data: ''
  });
  
  const [errors, setErrors] = useState({});
  const [touched, setTouched] = useState({});
  const [loading, setLoading] = useState(false);

  const handleChange = (name, value) => {
    setFormData(prev => ({ ...prev, [name]: value }));
    
    if (errors[name]) {
      setErrors(prev => ({ ...prev, [name]: '' }));
    }
  };

  const handleBlur = (name) => {
    setTouched(prev => ({ ...prev, [name]: true }));
    
    const validation = validateTaskForm(formData);
    setErrors(validation.errors);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    
    setTouched({ nome: true, descricao: true, data: true });
    
    const validation = validateTaskForm(formData);
    setErrors(validation.errors);
    
    if (!validation.valid) {
      return;
    }
    
    setLoading(true);
    try {
      // Chama a API para criar a tarefa
      const response = await fetch('/api/createtask', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(formData)
      });
      
      if (response.ok) {
        onSuccess && onSuccess();
        // Limpa o formul√°rio
        setFormData({ nome: '', descricao: '', data: '' });
        setTouched({});
        setErrors({});
      }
    } catch (error) {
      console.error('Erro:', error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="space-y-6">
      <ValidatedInput
        label="Nome da Tarefa"
        name="nome"
        value={formData.nome}
        onChange={handleChange}
        onBlur={handleBlur}
        error={errors.nome}
        touched={touched.nome}
        placeholder="Ex: Comprar material"
        maxLength={100}
      />

      <ValidatedTextarea
        label="Descri√ß√£o"
        name="descricao"
        value={formData.descricao}
        onChange={handleChange}
        onBlur={handleBlur}
        error={errors.descricao}
        touched={touched.descricao}
        placeholder="Descreva a tarefa..."
        required
        maxLength={255}
        rows={4}
      />

      <ValidatedInput
        label="Data"
        name="data"
        type="datetime-local"
        value={formData.data}
        onChange={handleChange}
        onBlur={handleBlur}
        error={errors.data}
        touched={touched.data}
      />

      <button
        type="submit"
        disabled={loading}
        className="w-full bg-blue-500 text-white py-3 rounded-xl hover:bg-blue-600 disabled:bg-gray-400"
      >
        {loading ? 'Criando...' : 'Criar Tarefa'}
      </button>
    </form>
  );
}
```

### Exemplo 3: Formul√°rio de Registro

```jsx
'use client';
import { useState } from 'react';
import { ValidatedInput, PasswordInput } from '@/components/ValidatedInput';
import { validateRegisterForm } from '@/functions/validation';

export default function RegisterPage() {
  const [formData, setFormData] = useState({
    nome: '',
    email: '',
    senha: '',
    confirmarSenha: ''
  });
  
  const [errors, setErrors] = useState({});
  const [touched, setTouched] = useState({});
  const [loading, setLoading] = useState(false);

  const handleChange = (name, value) => {
    setFormData(prev => ({ ...prev, [name]: value }));
    
    if (errors[name]) {
      setErrors(prev => ({ ...prev, [name]: '' }));
    }
  };

  const handleBlur = (name) => {
    setTouched(prev => ({ ...prev, [name]: true }));
    
    const validation = validateRegisterForm(formData);
    setErrors(validation.errors);
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    
    setTouched({
      nome: true,
      email: true,
      senha: true,
      confirmarSenha: true
    });
    
    const validation = validateRegisterForm(formData);
    setErrors(validation.errors);
    
    if (!validation.valid) {
      return;
    }
    
    setLoading(true);
    try {
      // Sua l√≥gica de registro aqui
      console.log('Registro:', formData);
    } catch (error) {
      console.error('Erro:', error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="space-y-6">
      <ValidatedInput
        label="Nome"
        name="nome"
        value={formData.nome}
        onChange={handleChange}
        onBlur={handleBlur}
        error={errors.nome}
        touched={touched.nome}
        placeholder="Seu nome completo"
        maxLength={40}
      />

      <ValidatedInput
        label="Email"
        name="email"
        type="email"
        value={formData.email}
        onChange={handleChange}
        onBlur={handleBlur}
        error={errors.email}
        touched={touched.email}
        placeholder="seuemail@exemplo.com"
        required
        maxLength={100}
        autoComplete="username"
      />

      <PasswordInput
        label="Senha"
        name="senha"
        value={formData.senha}
        onChange={handleChange}
        onBlur={handleBlur}
        error={errors.senha}
        touched={touched.senha}
        placeholder="M√≠nimo 6 caracteres"
        required
        autoComplete="new-password"
      />

      <PasswordInput
        label="Confirmar Senha"
        name="confirmarSenha"
        value={formData.confirmarSenha}
        onChange={handleChange}
        onBlur={handleBlur}
        error={errors.confirmarSenha}
        touched={touched.confirmarSenha}
        placeholder="Digite a senha novamente"
        required
        autoComplete="new-password"
      />

      <button
        type="submit"
        disabled={loading}
        className="w-full bg-blue-500 text-white py-3 rounded-xl hover:bg-blue-600 disabled:bg-gray-400"
      >
        {loading ? 'Cadastrando...' : 'Cadastrar'}
      </button>
    </form>
  );
}
```

---

## üìã Regras de Valida√ß√£o

### Email
- ‚úÖ Obrigat√≥rio
- ‚úÖ Formato v√°lido (usuario@dominio.com)
- ‚úÖ M√°ximo 100 caracteres

### Senha
- ‚úÖ Obrigat√≥rio
- ‚úÖ M√≠nimo 6 caracteres
- ‚úÖ M√°ximo 100 caracteres

### Nome
- ‚úÖ Opcional (mas se fornecido)
- ‚úÖ M√≠nimo 2 caracteres
- ‚úÖ M√°ximo 40 caracteres

### Descri√ß√£o de Tarefa
- ‚úÖ Obrigat√≥rio
- ‚úÖ N√£o pode estar vazio
- ‚úÖ M√°ximo 255 caracteres

### Nome de Lista
- ‚úÖ Obrigat√≥rio
- ‚úÖ N√£o pode estar vazio
- ‚úÖ M√°ximo 40 caracteres

---

## üé® Features dos Componentes

### ValidatedInput
- ‚úÖ Label com indicador de obrigat√≥rio (*)
- ‚úÖ √çcone opcional √† esquerda
- ‚úÖ Contador de caracteres
- ‚úÖ Mensagem de erro com √≠cone
- ‚úÖ Indicador visual de sucesso (‚úì)
- ‚úÖ Estados de foco e erro

### PasswordInput
- ‚úÖ Bot√£o para mostrar/ocultar senha
- ‚úÖ √çcone de cadeado
- ‚úÖ Todas as features do ValidatedInput

### ValidatedTextarea
- ‚úÖ Contador de caracteres
- ‚úÖ Redimensionamento controlado
- ‚úÖ Todas as features do ValidatedInput

---

## üîÑ Fluxo de Valida√ß√£o

```
Usu√°rio digita ‚Üí onChange ‚Üí Remove erro
                     ‚Üì
Usu√°rio sai do campo ‚Üí onBlur ‚Üí Valida campo
                     ‚Üì
Usu√°rio submete ‚Üí onSubmit ‚Üí Valida tudo
                     ‚Üì
                 V√°lido? ‚Üí Envia para API
                     ‚Üì
                 Inv√°lido? ‚Üí Mostra erros
```

---

## üí° Boas Pr√°ticas

1. **Valida√ß√£o em tempo real:**
   - Valida no `onBlur` (quando sai do campo)
   - N√£o valida a cada tecla (evita frustra√ß√£o)

2. **Feedback visual:**
   - Borda vermelha para erro
   - √çcone e mensagem clara
   - Checkmark verde para sucesso

3. **Acessibilidade:**
   - Labels adequados
   - Mensagens de erro descritivas
   - Estados visuais claros

4. **UX:**
   - Contador de caracteres
   - Placeholder informativo
   - Desabilita bot√£o durante carregamento

---

## üÜò Troubleshooting

### Erro n√£o aparece
- Verifique se o campo est√° marcado como `touched`
- Chame `handleBlur` no evento `onBlur`

### Valida√ß√£o n√£o funciona
- Importe a fun√ß√£o de valida√ß√£o correta
- Verifique se est√° passando os dados corretos

### Componente n√£o renderiza
- Verifique se importou corretamente
- Adicione `'use client'` se for client component

---

**Data:** 15 de outubro de 2025  
**Status:** ‚úÖ Pronto para uso
